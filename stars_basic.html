<html>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
	var width = 1080, height = 520;
	var svg = d3.select("body").append("svg")
			.attr("width",width)
			.attr("height",height)
			.attr("style","cursor:crosshair");

	d3.csv( "stars.csv", function(row) {
		return {ra:row.ra *1, dec:row.dec*1};
	}, function( data ) {
		var xScale = d3.scaleLinear()
				.domain([0,360])
				.range([0,width]);
		var yScale = d3.scaleLinear()
				.domain([90,-90])
				.range([0,height]);


		svg.append("g").selectAll("circle")
				.data(data)
				.enter()
				.append("circle")
				.attr("cx",function(d) { return xScale(d.ra); })
				.attr("cy",function(d) { return yScale(d.dec); })
				.attr("r", 1 );

		//
		// Super secret extra stuff
		//
		var text = svg.append("text")
				.attr("x",20)
				.attr("y",10 )
				.attr("fill","red")
				.attr("font-weight", "bold")
				.text("");

		var lineX = svg.append("line")
				.attr("x1", 0)
				.attr("x2", width)
				.attr("y1", 0)
				.attr("y2", 0)
				.attr("stroke","red")
				.attr("stroke-width",0.5);

		var lineY = svg.append("line")
				.attr("x1", 0)
				.attr("x2", 0)
				.attr("y1", 0)
				.attr("y2", height)
				.attr("stroke","red")
				.attr("stroke-width",0.5);

		svg.on("mousemove", function() {
				var pos = d3.mouse(svg.node()),
						ra = xScale.invert(pos[0]),
						dec = yScale.invert(pos[1]);

				text.attr("x", pos[0]+10)
						.attr("y", pos[1]-10)
						.text("RA: " + ra.toFixed(0) + " , Dec: " + dec.toFixed(0));

				lineX.attr("y1",pos[1] ).attr("y2",pos[1]);
				lineY.attr("x1",pos[0] ).attr("x2",pos[0]);
		})
	})
</script>
</body>
</html>